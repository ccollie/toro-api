

fragment RuleAlertOptions on RuleAlertOptions {
  triggerDelay
  failureThreshold
  successThreshold
  maxAlertsPerEvent
  alertOnReset
  recoveryWindow
  notifyInterval
}

fragment Rule on Rule {
  id
  name
  description
  createdAt
  updatedAt
  metric {
    id
    isActive
    name
    options
  }
  condition {
    ... on ThresholdCondition {
      errorThreshold
      warningThreshold
      operator
    }
    ... on PeakCondition {
      errorThreshold
      warningThreshold
      influence
      lag
      direction
    }
    ... on ChangeCondition {
      changeType
      errorThreshold
      warningThreshold
      operator
      windowSize
      timeShift
      aggregationType
    }
  }
  state
  payload
  channels {
    ...NotificationChannel
  }
  isActive
  message
  options {
    ...RuleAlertOptions
  }
  alertCount
}
